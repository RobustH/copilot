spring:
  ai:
    # 嵌入模型配置 - 使用硅基流动 (OpenAI 兼容)
    openai:
      api-key: ${SILICONFLOW_API_KEY}
      base-url: https://api.siliconflow.cn
      embedding:
        options:
          # 硅基流动支持的中文 Embedding 模型
          # BAAI/bge-large-zh-v1.5 (1024维)
          # BAAI/bge-m3 (1024维)
          model: BAAI/bge-large-zh-v1.5
    
    # Milvus VectorStore 配置
    vectorstore:
      milvus:
        initialize-schema: true
        client:
          host: ${MILVUS_HOST:localhost}
          port: ${MILVUS_PORT:19530}
          username: ${MILVUS_USERNAME:}
          password: ${MILVUS_PASSWORD:}
        database-name: ${MILVUS_DATABASE:default}
        collection-name: copilot_knowledge
        embedding-dimension: 1024
        metric-type: COSINE


# 知识库配置
copilot:
  knowledge:
    # Collection 名称
    collection-name: copilot_knowledge
    # 向量维度 (text-embedding-v3 的维度)
    vector-dimension: 1024
    # 最大文件大小 (MB)
    max-file-size: 10
    # 最大内容长度 (字符)
    max-content-length: 65535
    # 大文件阈值 (行数)
    large-file-threshold: 500
    # 大文件上下文行数
    context-lines: 50
    # Hook 最大结果数
    hook-max-results: 5
    # 默认目录最大深度
    default-max-depth: 5
    # 最大目录文件数
    max-directory-files: 100
    # 文档切割器配置
    splitter:
      chunk-size: 2000        # 每个块的最大 Token 数
      chunk-overlap: 400      # 块之间的重叠 Token 数
      min-chunk-size: 100     # 最小块大小
    # 默认忽略模式
    default-ignore-patterns:
      - node_modules
      - .git
      - dist
      - build
      - target
      - .idea
      - .vscode
      - __pycache__
      - .gradle
      - "*.lock"
      - "*.log"
      - "*.min.js"
      - "*.min.css"
